#!/bin/bash
#RUN AS ROOT

### Color Output
RED="\033[01;31m"      # Errors
GREEN="\033[01;32m"    # Success
YELLOW="\033[01;33m"   # Warnings/Information
BLUE="\033[01;34m"     # Heading
BOLD="\033[01;01m"     # Highlight
COEND="/e[0m"          # Ending Phrase
RESET="\033[00m"       # Normal

clear
if [ $(dpkg-query -W -f='${Status}' htop 2>/dev/null | grep -c "ok installed") -eq 0 ]; then
    echo -e "$BLUE dpkg-query: [-] No packages found matching 'htop'."
	echo -e "$YELLOW Would you like to install HTOP? (y/n)"             #Checks to see if htop is installed or not.
	echo -e "$RESET -------------------------------------"              #If it is installed then it will direct you to the second if statement.
	read $REPLY                                                         #If it isn't installed it will direct you to the first if statement.
	                                                                    #If it isn't installed you will be prompted with a choice to install or not.
	if [ $REPLY = 'y' ]; then                                           #If it is installed it will tell you if packages are detected + some other info then
		apt-get install htop                                            #direct you to the htop utility, your original request.
		if [ $? -eq 0 ]; then
			echo -e "$GREEN [+] HTOP has successfully been installed... $COEND"
		else
			echo -e "$RED [!] Installation was unsuccessful... $COEND"
		fi
	else
		sleep 1
		clear
		menu2
		fi
	fi


	if [ $(dpkg-query -W -f='${Status}' htop 2>/dev/null | grep -c "ok installed") -eq 1 ]; then
	dpkg-query -l htop
    echo -e "$BLUE dpkg-query: [+] Packages found matching 'htop'."
	echo -e "$YELLOW Would you like to start the HTOP utility? (y/n)"
	echo -e "$RESET -------------------------------------"
	read $REPLY
	
	if [ $REPLY = y ]; then
		sleep 1
		htop
	else
		sleep 1
		clear
		menu2
		fi
	fi
