#!/bin/bash

#v0.4

#Disabling the guest account
sudo gedit /etc/lightdm/lightdm.conf #Brings you to the lightdm txt area
#allow-guest=false to disable account and THEN greeter-hide-users=true

#Minimum password age
sudo gedit /etc/login.defs #Max days, 150. Min days, 10. Pass_Warn_Age, 7.

#Password Policy
sudo gedit /etc/pam.d/common-password #ENTER AT THE END OF THE COMPETITION
#At end of file, " auth required pam_tally2.so deny =10 onerr=failunlock_time=1800


#Updates
sudo apt-get update && sudo apt-get dist-upgrade
sudo APT::Periodic::Update-Package-Lists "1";

#Firewall 
sudo ufw enable
sudo ufw allow 22
sudo ufw allow 80
sudo ufw default deny

#Services
echo "Running services on this computer" #List's all services running

sudo service --status-all

echo "Continue to common service removal section..." #Choose wether to keep or disable telnet and apache2
read IDEA
echo

echo "1. Disable telnet?"
echo "2. Keep telnet?"
read IDEA
echo

if [[ $IDEA == 1 ]]; then 
  sudo service rm telnet
elif [[ $IDEA == 2 ]]; then
  echo "Continue operation..."
read IDEA
echo

echo "1. Disable apache2?"
echo "2. Keep apache2?"
read IDEA
echo

if [[ $IDEA == 1 ]]; then
  sudo service rm apache2
elif [[ $IDEA == 2 ]]; then
  echo "Continue operation..."
read IDEA
echo

fi

#Backdoor checking
sudo netstat -tulpna
echo "Continue..." #Pause time to check the backdoors then to move down script
read IDEA
echo
