#!/bin/bash

#RUN THIS SCRIPT AS SUDO "sudo bash <script> for example
#v0.8

start()
{
	echo "Starting Program..."
	
}

menu()
{

	clear
		echo "-------------------------------------------------------"
		echo -e "\e[1;32m ~CYBER SECURITY TOOL~ \e[0m"
		printf "Which operation would you like to run...?\n"
		echo -e "\e[1;32m [1] Start \e[0m"
		echo -e "\e[1;31m [2] Exit \e[0m"
		echo "-------------------------------------------------------"
		read start_menu
	
	
		case $start_menu in
		1)
			echo -e "\e[1;33m Starting Program... \e[0m"
			sleep 1
			clear
			start
		
			;;
	
		2)
			echo -e "\e[1;31m Shutting down... \e[0m"
			sleep 1
			clear
			exit
		
			;;
		
		*)
			echo -e "\e[1;31m Invalid Input, Redirecting... \e[0m"
			sleep 1
			menu
			;;
		
		esac
}

menu

echo -e "\e[1;33m Loading Selection... \e[0m"

begin()
{
		echo -e "\e[1;33m Loading Menu... \e[0m"
}

menu2()
{
	clear
	echo -e "\e[1;33m ########################################################### \e[0m"
	printf "[1] Prohibited Media File Searcher\n"
	printf "[2] Updater\n"
	printf "[3] SSH Root Login\n"
	printf "[4] Insecure Root Passwd\n"
	printf "[5] System Logs\n"
	printf "[6] User Checking\n"
	printf "[7] Group Checking\n"
	printf "[8] Service Checker\n"
	printf "[9] Password Policy\n"
	printf "[10] Account Policy\n"
	printf "[11] Exit\n"
	echo -e "\e[1;32m ----------------------------------------------------------- \e[0m"
	read begin_menu2


		case $begin_menu2 in
		1)
		echo -e "\e[1;32m Searching for Media Files... \e[0m"
		echo "------------------------------------------------------------"
		find / -name "*.mp3"
		find / -name "*.wma"
		find / -name "*.mp4"
		find / -name "*.mov"
		find / -name "*.avi"
		find / -name "*.gif"
		find / -name "*.jpg"
		find / -name "*.jpeg"
		find / -name "*.png"
		find / -name "*.bmp"
		find / -name "*.exe"
		echo -e "\e[1;32m [+] Finished! \e[0m"
		read SEARCH_RESULTS
		clear
		menu2
		
		;;
		
	2)
		echo -e "\e[1;32m Updating... \e[0m"
		apt-get update && apt-get dist-upgrade
		echo -e "\e[1;32m [+] UPDATED! \e[0m"
		read WAIT_FOR_USER
		clear
		menu2
		
		;;
		
	3)
		echo -e "\e[1;32m Permitting Root Login to NO. \e[0m"
		sed -i 's/PermitRootLogin yes/PermitRootLogin no/g' /etc/ssh/sshd_config
		echo -e "\e[1;32m [+] Finished! \e[0m"
		read WAIT_FOR_USER
		clear
		menu2
		
		;;
		
	4)
		echo -e "\e[1;32m Fix Insecure Root Passwd \e[0m"
		passwd
		echo -e "\e[1;32m [+] Secure \e[0m"
		read WAIT_FOR_USER
		clear
		menu2
		
		;;
		
	5)
		echo -e "\e[1;32m Installing System Logs Checker... \e[0m"
		apt-get install gnome
		gnome-system-logs
		echo -e "\e[1;32m [+] Installed \e[0m"
		read WAIT_FOR_USER
		clear
		menu2
		
		;;
		
	6)
		echo -e "\e[1;32m Check Users... \e[0m"
		cat /etc/passwd
		echo -e "\e[1;32m [+] Users checked \e[0m"
		read WAIT_FOR_USER
		clear
		menu2
	
		;;
		
	7)
		echo -e "\e[1;32m Check Groups... \e[0m"
		cat /etc/group
		echo -e "\e[1;32m [+] Groups checked \e[0m"
		read WAIT_FOR_USER
		clear
		menu2
		
		;;
		
	8)
		echo -e "\e[1;32m Checking Services... \e[0m"
		service --status-all
		echo -e "\e[1;32m [+] Services checked \e[0m"
		read WAIT_FOR_USER
		clear
		menu2
		
		;;
		
	9)
		echo -e "\e[1;32m Password Policy Section \e[0m"
		gedit /etc/pam.d/login.defs
		echo -e "\e[1;32m [+] Policy Re-written \e[0m"
		read WAIT_FOR_USER
		clear
		menu2
		
		;;
		
	10)
		echo -e "\e[1;32m Account Policy Section \e[0m"
		gedit /etc/pam.d/common-password
		clear
		echo -e "\e[1;32m [+] Policy Re-written \e[0m"
		read WAIT_FOR_USER
		clear
		menu2
		
		;;
		
	11)
		echo -e "\e[1;31m Shutting down... \e[0m"
		sleep 1
		clear
		exit
		
		;;
		
	*)
		echo -e "\e[1;31m Invalid Input, Redirecting... \e[0m"
		sleep 1
		clear
		menu2
		;;
	
	esac
}

menu2
